<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="member"> 
<!-- id 속성은 DAO 의 메소드와 같아야 한다. 여기의 boardVO 는 mybatis-confg.xml 에 Alias 되어 있습니다. -->

	<insert id="member_add">
		insert into member (member_id, member_pw, member_name, member_born_date, member_phone,
		member_comment,
		member_join_date, mno)
		values (#{member_id}, #{member_pw}, #{member_name},
		#{member_born_date}, #{member_phone},
		#{member_comment}, #{member_join_date}, mem_num.nextval)
	</insert>	
	<update id="member_edit">
		update member set member_id = #{member_id}, member_pw = #{member_pw},
		member_name = #{member_name}, member_born_date = #{member_born_date}, member_phone = #{member_phone},
		member_comment = #{member_comment}, member_join_date = #{member_join_date}
		where member_id = #{member_id}
	</update>
	
	<update id="member_editt">
		update member set member_id = #{member_id}, member_pw = #{member_pw},
		member_name = #{member_name}, member_born_date = #{member_born_date}, member_phone = #{member_phone},
		member_comment = #{member_comment}, member_join_date = #{member_join_date}
	</update>
	
	
	<delete id="member_del">
    	  delete
    	  from 
    	  	  member
          WHERE
              member_id = #{member_id}
    </delete>
		
	<select id="member_get" resultType="com.km.yak_erp.vo.Member">
       
          select
              *
          from
              member
          WHERE
              member_id = #{member_id}
      
    </select>
    <select id="qu_get" resultType="com.km.yak_erp.vo.Member_question">
       
          select
              *
          from
              member_question
          WHERE
              member_id = #{member_id}
      
    </select>
    
    <select id="fa_get" resultType="com.km.yak_erp.vo.Member_f">
       
          select
              *
          from
              member_f
          WHERE
              id = #{id}
      
    </select>
    
    
    
    <select id="selectByEmail" resultType="com.km.yak_erp.vo.Member">
        <![CDATA[
          SELECT
              EMAIL,
              NAME
          FROM
              MEMBER
          WHERE
              MEMBER_EMAIL = #{email}       
      ]]>
    </select>
    
    <select id="selectById" resultType="com.km.yak_erp.vo.Member">
        <![CDATA[
          SELECT
              *
          FROM
              MEMBER
          WHERE
              MEMBER_ID = #{id}       
      ]]>
    </select>
    
     <select id="idCheck" resultType="int">
        <![CDATA[
          SELECT
              count(*)
          FROM
              MEMBER
          WHERE
              MEMBER_ID = #{member_id}       
      ]]>
    </select>
    
    <select id="listPage" parameterType="hashMap"
		resultType="com.km.yak_erp.vo.Member">
		<![CDATA[
  
  	 select *
 from(
 select rownum as rnum, A.*
 from (select
 member_id,member_name, member_pw,member_born_date,member_phone,member_comment,member_join_date,authority,enabled ,mno
 from member
 WHERE member_name LIKE '%'||#{keyword}||'%'
 or member_id like '%' ||  #{keyword} || '%'
 ) A
 where rownum <=#{displayPost}+#{postNum})
 where rnum > #{displayPost}
  
		]]>
	</select>

	<select id="count" resultType="int">
	<![CDATA[
 		select count(MNO) from member
 		]]>
	</select>
	
		<select id="searchcount" parameterType="hashMap" resultType="int">
	<![CDATA[
 		select count(mno) from member
 		WHERE member_name LIKE '%' ||  #{keyword} || '%'
 		or member_id like '%' ||  #{keyword} || '%'
 		]]>


	</select>
    
</mapper>