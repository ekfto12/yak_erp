<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="business">
	
	
	<insert id="business_add">
		insert into buisness (company_name, owner_name, company_addr, c_comment, manager_id,
		manager_name, contact, email, bno, manager_pw)
		values 
		(#{company_name}, #{owner_name}, #{company_addr},
		#{c_comment}, #{manager_id},
		#{manager_name}, #{contact}, #{email}, busi_num.nextval, #{manager_pw} )
	</insert>
	
	
	
	<update id="businessUp">
		update buisness set company_name = #{company_name}, owner_name = #{owner_name},
		company_addr = #{company_addr}, c_comment = #{c_comment}, manager_id = #{manager_id},
		manager_name = #{manager_name}, contact = #{contact}, email = #{email}, manager_pw = #{manager_pw}
		where company_name = #{company_name}
	</update>
	
	
    <select id="businessget" resultType="com.km.yak_erp.vo.Business">
       
          select
              *
          from
              buisness
          WHERE
              company_name = #{company_name}
      
    </select>
    
    <select id="qu_get" resultType="com.km.yak_erp.vo.Business_question">
       
          select
              *
          from
              Buisness_question
          WHERE
              company_name = #{company_name}
      
    </select>
    
    <select id="bannerget" resultType="com.km.yak_erp.vo.Banner">
          select
              *
          from
              banner
          WHERE
              company_name = #{company_name}
    </select>
    
    <delete id="businessDel">
    	  delete
    	  from 
    	  	  buisness
          WHERE
              company_name = #{company_name}
    </delete>


	<select id="list" resultType="com.km.yak_erp.vo.Business">
		<![CDATA[
		  SELECT
		  	  BNO,
              COMPANY_NAME,
              OWNER_NAME
          FROM
              BUSINESS
          
		]]>
	</select>

	<select id="listPage1" parameterType="hashMap"
		resultType="com.km.yak_erp.vo.Business">
		<![CDATA[
 select *
 from(
 select rownum as rnum, A.*
 from (select
  bno, company_name, owner_name,company_addr,c_comment,manager_id,manager_name,contact,email
 from buisness	
 WHERE company_name LIKE '%'||#{keyword}||'%'
 ) A
 where rownum <=#{displayPost}+#{postNum})
 where rnum > #{displayPost}	
		]]>
	</select>


	<select id="listPage" parameterType="hashMap"
		resultType="com.km.yak_erp.vo.Business">
		<![CDATA[
 select *
 from(
 select rownum as rnum, A.*
 from (select
  bno, company_name, owner_name,company_addr,c_comment,manager_id,manager_name,contact,email
 from buisness
WHERE company_name LIKE '%'|| #{keyword}||'%'
 ) A
 where rownum <=#{displayPost}+#{postNum})
 where rnum > #{displayPost}	
		]]>


	</select>

	<!-- 게시물 총 갯수 -->

	<select id="count" resultType="int">
	<![CDATA[
 		select count(bno) from buisness
 		]]>


	</select>

	<select id="searchcount" parameterType="hashMap" resultType="int">
	<![CDATA[
 		select count(bno) from buisness
 		WHERE company_name LIKE '%' ||  #{keyword} || '%'
 		]]>
	</select>
</mapper>